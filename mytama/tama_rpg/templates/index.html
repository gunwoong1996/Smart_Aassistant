<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ë‚˜ë§Œì˜ ì„±ì¥ ë‹¤ë§ˆê³ ì¹˜ RPG</title>
  <link rel="stylesheet" href="/static/style.css"/>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="title">ë‚˜ë§Œì˜ ì„±ì¥ ë‹¤ë§ˆê³ ì¹˜ (ë¡œì»¬)</div>
      <div class="sub">
        LV {{p.level}} Â· EXP {{p.exp}} / {{need}} Â· ìŠ¤íŠ¸ë¦­ {{p.streak}}ì¼
      </div>
      <div class="classline">
        í´ë˜ìŠ¤: <b>{{base_class}}</b>
        {% if trait %} <span class="muted">( {{trait}} íŠ¹ì„± )</span>{% endif %}
        {% if title %} <span class="badge">{{title}}</span>{% endif %}
      </div>
    </header>

    <section class="card">
      <h2>ì˜¤ëŠ˜ ë¬´ì—‡ì„ ì´ë¤˜ëŠ”ê°€?</h2>
      <form action="/log" method="post" class="form">

        <input class="note" type="date" name="date" value="{{today}}"> 

        <label><input type="checkbox" name="actions" value="strength"> ê·¼ë ¥ìš´ë™ (í˜ +5)</label>
        <label><input type="checkbox" name="actions" value="stamina"> ìœ ì‚°ì†Œ (ì²´ë ¥ +5)</label>
        <label><input type="checkbox" name="actions" value="intelligence"> ê³µë¶€/ë…ì„œ (ì§€ëŠ¥ +3)</label>
        <label><input type="checkbox" name="actions" value="wealth"> ì ê¸ˆ/íˆ¬ì ì„±ê³µ (ì¬ë ¥ +7)</label>
        <label><input type="checkbox" name="actions" value="discipline"> ê¸ˆì£¼/ì‹ë‹¨ ì„±ê³µ (ìì œë ¥ +4)</label>

        <input class="note" name="note" placeholder="ë©”ëª¨(ì„ íƒ) ì˜ˆ: ë„ë¦¼ì²œ 10km, ìŠ¤ì¿¼íŠ¸ 3ì„¸íŠ¸"/>
        <button class="btn" type="submit">ê¸°ë¡í•˜ê¸°</button>
      </form>
      <p class="hint">* ì²« ì…ë ¥ ì‹œ: ê¾¸ì¤€í•¨ +2, ìŠ¤íŠ¸ë¦­ +1, ìŠ¤íŠ¸ë¦­ ë³´ë„ˆìŠ¤ EXP ì ìš©</p>
      <p class="hint">* 7ì¼ ë™ì•ˆ í•´ë‹¹ í–‰ë™ì´ ì—†ìœ¼ë©´ í•´ë‹¹ ìŠ¤íƒ¯ -2 (ì•½í•œ ê°ì‡ )</p>
    </section>

    <section class="card">
      <h2>ìŠ¤íƒ¯</h2>
      <div class="grid">
        <div class="stat">ğŸ’ª í˜ <b>{{p.strength}}</b> {% if flags.strength_50 %}<span class="tag">ì–´ê¹¨í™•ì¥</span>{% elif flags.strength_20 %}<span class="tag">ê·¼ìœ¡íŒ”</span>{% endif %}</div>
        <div class="stat">ğŸ« ì²´ë ¥ <b>{{p.stamina}}</b> {% if flags.stamina_50 %}<span class="tag">ìŠ¤í”¼ë“œë¼ì¸</span>{% elif flags.stamina_20 %}<span class="tag">ìƒê¸°</span>{% endif %}</div>
        <div class="stat">ğŸ§  ì§€ëŠ¥ <b>{{p.intelligence}}</b> {% if flags.intelligence_50 %}<span class="tag">ì±…+ì „êµ¬</span>{% elif flags.intelligence_20 %}<span class="tag">ì•ˆê²½</span>{% endif %}</div>
        <div class="stat">ğŸ’° ì¬ë ¥ <b>{{p.wealth}}</b> {% if flags.wealth_50 %}<span class="tag">ì½”íŠ¸</span>{% elif flags.wealth_20 %}<span class="tag">ì‹œê³„</span>{% endif %}</div>
        <div class="stat">ğŸ§˜ ìì œë ¥ <b>{{p.discipline}}</b> {% if flags.discipline_50 %}<span class="tag">ì°¨ë¶„í‘œì •</span>{% elif flags.discipline_20 %}<span class="tag">í”¼ë¶€í†¤</span>{% endif %}</div>
        <div class="stat">â¤ï¸ ê¾¸ì¤€í•¨ <b>{{p.consistency}}</b> {% if flags.consistency_50 %}<span class="tag">í›„ê´‘</span>{% elif flags.consistency_20 %}<span class="tag">ì˜¤ë¼</span>{% endif %}</div>
      </div>
    </section>

    <section class="card">
      <h2>ìŠ¤íƒ¯ ë­í‚¹</h2>
      <ol>
        {% for k,v in sorted_stats %}
          <li>{{k}}: <b>{{v}}</b></li>
        {% endfor %}
      </ol>
      <p class="muted">â€» ë©€í‹° íŠ¹ì„±: 2ìœ„ ìŠ¤íƒ¯ì´ 1ìœ„ì˜ 70% ì´ìƒì´ë©´ í™œì„±</p>
      <p class="muted">â€» ë§‘ì€ëˆˆ(í™•ì¥í˜•): ìƒìœ„ 3ê°œ ìŠ¤íƒ¯ ì°¨ì´ê°€ 10 ì´ë‚´</p>
    </section>

    <section class="card">
      <h2>ìµœê·¼ ê¸°ë¡</h2>
      {% if recent_actions and recent_actions|length > 0 %}
        <ul class="loglist">
          {% for a in recent_actions %}
            <li class="logitem">
              <div class="logtop">
                <div>
                  <b>{{a.date}}</b>
                  <span class="pill">{{a.type_ko}}</span>
                </div>

                <!-- ì‚­ì œ ë²„íŠ¼ -->
                {% if a.id is defined %}
                  <form action="/delete" method="post" class="deleteform" onsubmit="return confirm('ì´ ê¸°ë¡ì„ ì‚­ì œí• ê¹Œ?');">
                    <input type="hidden" name="action_id" value="{{a.id}}">
                    <button type="submit" class="delbtn">ì‚­ì œ</button>
                  </form>
                  <a class="delbtn" href="/edit/{{a.id}}" style="text-decoration:none; display:inline-block;">ìˆ˜ì •</a>
                {% endif %}
              </div>

              {% if a.note %}
                <div class="lognote">{{a.note}}</div>
              {% else %}
                <div class="lognote muted">ë©”ëª¨ ì—†ìŒ</div>
              {% endif %}
            </li>
          {% endfor %}
        </ul>

        <p class="muted" style="margin-top:10px;">
          * ì‚­ì œëŠ” â€œê¸°ë¡â€ë§Œ ì§€ìš°ëŠ” ë™ì‘ì´ì•¼. (ìŠ¤íƒ¯/EXP ë¡¤ë°±ê¹Œì§€ í•˜ë ¤ë©´ app.pyì—ì„œ ì¬ê³„ì‚° ë¡œì§ì„ ë„£ì–´ì•¼ í•¨)
        </p>
      {% else %}
        <div class="muted">ì•„ì§ ê¸°ë¡ì´ ì—†ì–´.</div>
      {% endif %}
    </section>

  </div>
</body>
</html>